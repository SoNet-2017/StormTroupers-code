<div class="w3-container w3-bar w3-top w3-card-2" id="topBarHome">


    <a class="w3-bar-item w3-button" id="homeLinkHome" ng-click="goToDashboard()"><i
            class="glyphicon glyphicon-home w3-large"></i></a>
    <a class="w3-bar-item w3-button" id="userLinkHome" ng-click="goToSearchCrew()">Search Crew</a>
    <a class="w3-bar-item w3-button" id="projectsLinkHome" ng-click="goToSearchProjects()">Search Projects</a>


    <!--
        <div class="w3-bar-item w3-dropdown-click" id="typeSearchHome">
            <a ng-click="showSearchItem()" class=" glyphicon glyphicon-search w3-large" id="searchIconHome"></a>
            <div class="w3-dropdown-content w3-bar-block w3-border" id="typeSearchContentHome">
                <a href="#" class="w3-bar-item w3-button"><i class="glyphicon glyphicon-user"></i> Search Troupers</a>
                <a href="#" class="w3-bar-item w3-button"><i class="glyphicon glyphicon-project"></i> Search Projects</a>
            </div>
        </div>
        <input class="w3-input w3-border" type="text" id="searchBarHome">-->

    <form id="searchItemHome">
        <div class="input-group">
            <input id="searchItemHomeKeyword" type="text" class="form-control" placeholder="Search" ng-submit="launchSearchInSearchPage()">
            <div class="input-group-btn">
                <button class="btn btn-default" type="submit" ng-click="launchSearchInSearchPage()">
                    <i class="glyphicon glyphicon-search"></i>
                </button>
            </div>
        </div>
    </form>

    <div class="w3-bar-item w3-right" id="logoChatBarHome"><span><a href="#!/usersList"><i
            class="w3-right glyphicon glyphicon-comment w3-xlarge" style="color: white;"></i></a></span></div>
    <div class="w3-bar-item w3-right w3-dropdown-hover" id="logoReminderBarHome">
        <span>
            <i class="w3-right glyphicon glyphicon-bell w3-xlarge" style="color: white;"></i>
        </span>
        <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <iframe src="https://calendar.google.com/calendar/embed?showTitle=0&amp;showPrint=0&amp;mode=AGENDA&amp;height=200&amp;wkst=1&amp;bgcolor=%23999999&amp;src=r7sjqm37dleu42bjdb59r1j500%40group.calendar.google.com&amp;color=%23691426&amp;ctz=Europe%2FRome"
                    style="border-width:0" min-width="400" width="100%" height="300" frameborder="0" scrolling="no"></iframe>
            <a ng-repeat="reminder in dati.reminders | filter:{user: profile.$id} | filter:{date:dati.currentDate}" class="w3-bar-item w3-button">
                <i class="glyphicon glyphicon-exclamation-sign w3-large w3-center" style="padding-right:4px"></i>
                <strong>{{reminder.projectName}}:</strong> {{reminder.reminder}}</a>
        </div>
    </div>

    <div class="w3-bar-item w3-dropdown-click w3-right" id="logoBarHome" ng-click="showLogoItem()">
        {{profile.name}}
        <div class="w3-dropdown-content w3-bar-block w3-border w3-right" id="logoBarContentHome">
            <a ng-click="goToMyPublicProfile()" class="w3-bar-item w3-button"><i
                    class="glyphicon glyphicon-user w3-large"></i> Your Public
                Profile</a>
            <a ng-click="goToEditProfile()" class="w3-bar-item w3-button"><i
                    class="glyphicon glyphicon-pencil w3-large"></i> Edit Profile</a>
            <a ng-click="logout()" class="w3-bar-item w3-button"><i class="glyphicon glyphicon-off w3-large"></i> Logout</a>
        </div>
    </div>

    <div id="logoBarImgContainerHome">
        <img class="media-object" ng-src="../{{profile.img_url}}" alt="{{profile.img_alt}}"
             ng-if="!(profile.img_url.includes('https://firebasestorage.googleapis.com')) && profile.img_url!=''">
        <img class="media-object" ng-src="{{profile.img_url}}" alt="{{profile.img_alt}}"
             ng-if="profile.img_url.includes('https://firebasestorage.googleapis.com')">
        <img class="media-object" ng-src="../images/StormTroupersLogo.png" alt="{{profile.img_alt}}"
             ng-if="profile.img_url == ''">
    </div>

</div>

<div id="bodyHome" class="w3-container w3-col l12 s12 m12">
    <div id="sideUserHome" class="w3-col l3 m3 s3 w3-card-2"
         style="background: linear-gradient(rgba(0,0,0,.5), rgba(0,0,0,.5));">
        <h3 id="userNameAndLastHome">{{profile.name}} {{profile.lastName}}</h3>
        <p id="userRolesHome"></p>
        <p id="userCityHome"></p>
        <div id="userPhotoHome">
            <img class="media-object" ng-src="../{{profile.img_url}}" alt="{{profile.img_alt}}"
                 ng-if="!(profile.img_url.includes('https://firebasestorage.googleapis.com')) && profile.img_url!=''">
            <img class="media-object" ng-src="{{profile.img_url}}" alt="{{profile.img_alt}}"
                 ng-if="profile.img_url.includes('https://firebasestorage.googleapis.com')">
            <img class="media-object" ng-src="../images/StormTroupersLogo.png" alt="{{profile.img_alt}}"
                 ng-if="profile.img_url == ''">
        </div>
        <br>
        <a ng-click="goToMyProjects()" class="w3-bar-item" id="userProjectHome">My Projects <i
                class="glyphicon glyphicon-film w3-large"></i></a><br><br>
        <a ng-click="goToMyTroupers(profile.$id)" class="w3-bar-item" id="userTroupeHome">My Troupers <i
                class="glyphicon glyphicon-user w3-large"></i></a><br><br>
        <a ng-click="goToMyApplications()" class="w3-bar-item" id="userApplicationHome">My Applications <i
                class="glyphicon glyphicon-briefcase w3-large"></i></a><br><br>
        <a ng-click="goToEditProfile()" class="w3-bar-item" id="editProfileLinkHome">Edit Profile <i
                class="glyphicon glyphicon-cog w3-large"></i></a>
    </div>

    <div id="projectContainer" class="w3-col l8 m8 s8 w3-card-2"
         style="border-top-left-radius: 4mm;border-top-right-radius: 4mm;margin-left: 30px">
        <div class="w3-row">
            <div class="w3-animate-opacity">

                <div class="w3-container" id="publicProjectImage" style="background-image:url({{prj.img_url}});">
                    <div id="likePanel" class="w3-container w3-col l2 m2 s2"
                         style="min-height: 350px; background: linear-gradient(rgba(0,0,0,.5), rgba(0,0,0,.8)); margin: 0px;">
                        <div class="w3-content w3-center" id="likePanelHover">
                            <div>
                                <i class="glyphicon glyphicon-map-marker w3-xxlarge"
                                   style="color: white;"></i>
                                <h5 class="" style="color: white;text-shadow: 2px 2px 4px #333333;">
                                    {{prj.city}}
                                </h5>
                            </div>
                            <br><br>
                            <h4 class="w3-content w3-center" style="color: white;">{{prj.likes}}</h4>
                            <a ng-click="addProjectToFavourite()">
                                <i class="glyphicon glyphicon-heart-empty w3-xxlarge"
                                   style="color: white;"></i></a>
                            <br><br><br><br>
                            <div id="proposeButton" class="w3-tooltip">
                                <a data-toggle="modal" data-target="#myModal"><i
                                        class="glyphicon glyphicon-plus w3-xxlarge"
                                        style="color: white;"></i>
                                    <span style="position:absolute;right:0;bottom:0px" class="w3-text w3-tag">Propose to collaborate!</span></a>
                            </div>
                        </div>
                    </div>
                    <div class="w3-col l10 m10 s10">
                        <h2><strong>{{prj.title}}</strong></h2>
                    </div>

                </div>

            </div>
        </div>


        <div class="modalContainer">
            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 style="color:red;"><span class="glyphicon glyphicon-random"></span> Propose to
                                collaborate for <strong>{{prj.title}}</strong></h4>
                        </div>
                        <div class="modal-body">
                            <form role="form">
                                <div class="form-group">
                                    <label><span class="glyphicon glyphicon-user"></span> {{profile.name}} {{profile.lastName}}</label>
                                    <input type="text" class="form-control" placeholder="Enter email" value="{{profile.email}}">
                                </div>
                                <div class="form-group">
                                    <label><span class="glyphicon glyphicon-fire"></span> Why I'm the person you're looking for:</label>
                                    <input ng-model="dati.motivationalMsg" type="text" class="form-control" placeholder="Write a message for the troupe">
                                </div>
                                <div class="form-group">
                                    <label><span class="glyphicon glyphicon-briefcase"></span> I'd like to apply for:</label>
                                    <ul style="text-align: left; color: #636466;list-style: none">
                                        <div>
                                            <li ng-repeat="roleNeeded in adjustedRoles">
                                                <label><input type="checkbox"
                                                              value="{{roleNeeded}}" name="roleAppliedFor">{{roleNeeded}}</label>
                                            </li>
                                        </div>
                                    </ul>
                                </div>
                                <button ng-click="addApplication()" type="submit" class="btn btn-default btn-success btn-block" data-dismiss="modal">
                                    <span class="glyphicon glyphicon-flash"></span> Apply!
                                </button>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-default btn-default pull-left" data-dismiss="modal">
                                <span class="glyphicon glyphicon-remove"></span> Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="w3-row" style="margin: 10px;">
            <h3 class="w3-right" style="color: lightgray; text-align: right; padding-right: 20px; margin-top: 10px">
                {{prj.progress}}</h3>
            <h3 class="w3-left" style="color: lightgray; text-align: left; padding-left: 20px; margin-top: 10px">
                {{prj.type}}, {{prj.genre}}</h3>
        </div>
        <hr style="margin: 10px;">
        <div class="w3-row">
            <div class="w3-container">
                <h4 style="color: #636466; padding-left: 20px; text-align: center">CONCEPT</h4>

                <h5 style="color: #636466;">{{prj.description}}</h5>

                <br><br>

            </div>
        </div>

        <hr style="margin: 10px">
        <div class="w3-row">
            <div class="w3-container">
                <h4 style="color: #636466; padding-left: 20px; text-align: center">PEOPLE WE'RE LOOKING FOR:</h4>

                <ul style="text-align: left; color: #636466;">
                    <li ng-repeat="roleNeeded in adjustedRoles">{{roleNeeded}}</li>
                </ul>

                <br><br>

            </div>
        </div>

        <div id="projTroupersContainer" class="w3-row w3-animate-opacity w3-card-2 w3-dark-gray"
             style="width: 100%; float: left;">
            <div class="w3-col l3 m3 s3">
                <h4 class="w3-right" style="padding: 10px; color: white">THE TROUPE: </h4>
            </div>
            <div class="w3-col l9 m9 s9" style="align-content: center">
                <ul class="w3-left" style="padding: 0px;">
                    <li ng-repeat="user in projTroupers"
                        style="display: inline-block; list-style: none; padding-top: 10px">
                        <a id="troupeUserImgLink" ng-click="goToPublicProfile(user.$id)">
                            <img class="media-object w3-circle" ng-src="../{{user.img_url}}" alt="{{user.img_alt}}"
                                 ng-if="!(user.img_url.includes('https://firebasestorage.googleapis.com')) && user.img_url!=''">
                            <img class="media-object w3-circle" ng-src="{{user.img_url}}" alt="{{user.img_alt}}"
                                 ng-if="user.img_url.includes('https://firebasestorage.googleapis.com')">
                            <img class="media-object w3-circle" ng-src="../images/StormTroupersLogo.png"
                                 alt="{{user.img_alt}}" ng-if="user.img_url == ''">
                        </a>
                        <!--<h4><a ng-click="goToPublicProfile(user)">{{user}}</a></h4>-->
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

